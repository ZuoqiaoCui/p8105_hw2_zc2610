p8105_hw2_zc2610
================
Zuoqiao Cui
2022-10-01

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
    ## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
    ## ✔ tidyr   1.2.0      ✔ stringr 1.4.1 
    ## ✔ readr   2.1.2      ✔ forcats 0.5.2 
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(readxl)
library(dplyr)
```

## Problem 1

``` r
NYC_transit_data = read.csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line,station_name,station_latitude,station_longitude,starts_with("route"),entry, exit_only, vending, entrance_type, ada)
```

## Problem 2

Import, clean, and organize the data for Mr Trash Wheel

``` r
MrTrashWheel_df = 
    read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",sheet = "Mr. Trash Wheel",range = "A2:N535") %>% 
    janitor::clean_names() %>% 
    drop_na(dumpster) %>% 
    mutate(
      dumpster = as.character(dumpster),
      sports_balls = as.integer(round(sports_balls))
    )
```

Import, clean, and organize the data for Professor Trash Wheel

``` r
ProfessorTrashWheel_df = 
    read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",sheet = "Professor Trash Wheel",range = "A2:N117") %>% 
    janitor::clean_names() %>% 
    drop_na(dumpster) %>% 
    mutate(
      dumpster = as.character(dumpster),
      sports_balls = as.integer(round(sports_balls))
    )
```

Combine two sheets

``` r
MrTrashWheel_df = MrTrashWheel_df %>% 
 mutate(type = "Mr. Trash Wheel")
ProfessorTrashWheel_df = ProfessorTrashWheel_df %>% 
  mutate(type = "Professor Trash Wheel")
TrashWheel_tidy = bind_rows(MrTrashWheel_df,ProfessorTrashWheel_df) %>% 
  janitor::clean_names()
```

Number of observations and variables in Mr Trash Wheel dataset

``` r
num_of_MrTrashWheel_observations = nrow(MrTrashWheel_df)
num_of_MrTrashWheel_variables = ncol(MrTrashWheel_df)
num_of_MrTrashWheel_observations
```

    ## [1] 454

``` r
num_of_MrTrashWheel_variables
```

    ## [1] 15

Number of observations and variables in Mr Trash Wheel dataset

``` r
num_of_ProfessorTrashWheel_observations = nrow(ProfessorTrashWheel_df)
num_of_ProfessorTrashWheel_variables = ncol(ProfessorTrashWheel_df)
num_of_ProfessorTrashWheel_observations
```

    ## [1] 71

``` r
num_of_ProfessorTrashWheel_variables
```

    ## [1] 15

Number of observations and variables in Mr Trash_tidy date frame

``` r
num_of_TrashWheel_tidy_observations = nrow(TrashWheel_tidy) 
num_of_TrashWheel_tidy_variables = ncol(TrashWheel_tidy)
num_of_TrashWheel_tidy_observations
```

    ## [1] 525

``` r
num_of_TrashWheel_tidy_variables
```

    ## [1] 15

Calculate the total weight of trash collected by professor trash wheel

``` r
professor_total_weight = sum(filter(TrashWheel_tidy,type == "Professor Trash Wheel")$weight_tons)
professor_total_weight
```

    ## [1] 135.5

Calculate the total number of sports bals collected by Mr trash wheel

``` r
Mr_total_sportsballs = sum(filter(TrashWheel_tidy,year == 2020)$sports_balls)
Mr_total_sportsballs
```

    ## [1] 856

Description There are totally 454 observations and 15 variables in the
Mr Trash Wheel dataset. There are totally 71 observations and 15
variables in the Professor Trash Wheel dataset. There are totally 525
observations and 15 variables in the final combined dataset. Key
variables contain “dumpster”,“year”,“weight_tons”,“sports_balls” and so
on. The total weight of trash collected by Professor Trash Wheel is
135.5 The total number of sports balls collected by Mr. Trash Wheel in
2020 is 856

## Problem 3

1.  Separate date into year, month and day
2.  Replace month number with month name

``` r
pols_month_df = 
    read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
    janitor::clean_names() %>% 
    separate(mon,into = c("year","month","day"),sep = "-") %>% 
  mutate(
    month = recode(month, "01" = "January",
                  "02" = "February",
                  "03" = "March",
                  "04" = "April",
                  "05" = "May",
                  "06" = "June",
                  "07" = "July",
                  "08" = "Augest",
                  "09" = "September",
                  "10" = "October",
                  "11" = "November", 
                  "12" = "December"
    )
  )
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month_df
```

    ## # A tibble: 822 × 11
    ##    year  month     day   prez_…¹ gov_gop sen_gop rep_gop prez_…² gov_dem sen_dem
    ##    <chr> <chr>     <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1 1947  January   15          0      23      51     253       1      23      45
    ##  2 1947  February  15          0      23      51     253       1      23      45
    ##  3 1947  March     15          0      23      51     253       1      23      45
    ##  4 1947  April     15          0      23      51     253       1      23      45
    ##  5 1947  May       15          0      23      51     253       1      23      45
    ##  6 1947  June      15          0      23      51     253       1      23      45
    ##  7 1947  July      15          0      23      51     253       1      23      45
    ##  8 1947  Augest    15          0      23      51     253       1      23      45
    ##  9 1947  September 15          0      23      51     253       1      23      45
    ## 10 1947  October   15          0      23      51     253       1      23      45
    ## # … with 812 more rows, 1 more variable: rep_dem <dbl>, and abbreviated
    ## #   variable names ¹​prez_gop, ²​prez_dem

create a president column using values prez_gop and prez_dem

``` r
pols_month_df %>% 
  mutate(
    president = ifelse(prez_gop == 1, "gop",ifelse(prez_gop == 0,"dem","special case")))
```

    ## # A tibble: 822 × 12
    ##    year  month     day   prez_…¹ gov_gop sen_gop rep_gop prez_…² gov_dem sen_dem
    ##    <chr> <chr>     <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1 1947  January   15          0      23      51     253       1      23      45
    ##  2 1947  February  15          0      23      51     253       1      23      45
    ##  3 1947  March     15          0      23      51     253       1      23      45
    ##  4 1947  April     15          0      23      51     253       1      23      45
    ##  5 1947  May       15          0      23      51     253       1      23      45
    ##  6 1947  June      15          0      23      51     253       1      23      45
    ##  7 1947  July      15          0      23      51     253       1      23      45
    ##  8 1947  Augest    15          0      23      51     253       1      23      45
    ##  9 1947  September 15          0      23      51     253       1      23      45
    ## 10 1947  October   15          0      23      51     253       1      23      45
    ## # … with 812 more rows, 2 more variables: rep_dem <dbl>, president <chr>, and
    ## #   abbreviated variable names ¹​prez_gop, ²​prez_dem

``` r
pols_month_df
```

    ## # A tibble: 822 × 11
    ##    year  month     day   prez_…¹ gov_gop sen_gop rep_gop prez_…² gov_dem sen_dem
    ##    <chr> <chr>     <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1 1947  January   15          0      23      51     253       1      23      45
    ##  2 1947  February  15          0      23      51     253       1      23      45
    ##  3 1947  March     15          0      23      51     253       1      23      45
    ##  4 1947  April     15          0      23      51     253       1      23      45
    ##  5 1947  May       15          0      23      51     253       1      23      45
    ##  6 1947  June      15          0      23      51     253       1      23      45
    ##  7 1947  July      15          0      23      51     253       1      23      45
    ##  8 1947  Augest    15          0      23      51     253       1      23      45
    ##  9 1947  September 15          0      23      51     253       1      23      45
    ## 10 1947  October   15          0      23      51     253       1      23      45
    ## # … with 812 more rows, 1 more variable: rep_dem <dbl>, and abbreviated
    ## #   variable names ¹​prez_gop, ²​prez_dem

remove prez_gop,prez_dem and day variables

``` r
pols_month_df = pols_month_df %>% 
select(-prez_dem,-prez_gop,-day)
pols_month_df
```

    ## # A tibble: 822 × 8
    ##    year  month     gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <chr> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1 1947  January        23      51     253      23      45     198
    ##  2 1947  February       23      51     253      23      45     198
    ##  3 1947  March          23      51     253      23      45     198
    ##  4 1947  April          23      51     253      23      45     198
    ##  5 1947  May            23      51     253      23      45     198
    ##  6 1947  June           23      51     253      23      45     198
    ##  7 1947  July           23      51     253      23      45     198
    ##  8 1947  Augest         23      51     253      23      45     198
    ##  9 1947  September      23      51     253      23      45     198
    ## 10 1947  October        23      51     253      23      45     198
    ## # … with 812 more rows

separate date into year, month, day

``` r
snps_df = read_csv("./data/fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
    separate(date,into = c("month","day","year"),sep = "/")
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

arrange year,month and organize them to be leading columns

``` r
snps_df = snps_df %>% 
  arrange(year,month)
```

switch unemployment dataset from “wide” to “long” format

``` r
unemployment_df = read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "percentage of unemployment")
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
